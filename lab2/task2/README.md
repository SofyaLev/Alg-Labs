# Задача 2: Сортировка слиянием +

## Описание

В данной задаче реализован модифицированный алгоритм сортировки слиянием, который помимо стандартной сортировки массива также выводит индексы и элементы подмассивов на этапе слияния. Это позволяет отслеживать процесс выполнения алгоритма и понимать, как происходит объединение отсортированных частей массива. Основная цель задачи — углубленное изучение работы алгоритма сортировки слиянием и анализ его поведения при различных типах входных данных.

## Структура проекта

```
Task2/
├── src/
│   ├── input.txt
│   ├── merge_sort_indexes.py
│   ├── output.txt
│   └── task2.py
└── tests/
    ├── test1.py
    ├── test2.py
    └── test3.py
```

### Описание файлов

- src/merge_sort_indexes.py: Реализация алгоритма сортировки слиянием с выводом индексов и элементов подмассивов на этапе слияния. Содержит функции merge_indexes и merge_sort_indexes.
- src/task2.py: Основной скрипт для выполнения сортировки. Читает данные из input.txt, выполняет сортировку слиянием с выводом индексов, и записывает результат в output.txt. Также включает тестирование производительности и использования памяти для различных типов массивов.
- src/input.txt: Входной файл, содержащий количество элементов и сам массив чисел.
- src/output.txt: Выходной файл, содержащий отсортированный массив.
- tests/test1.py: Тест с небольшим массивом для оценки производительности и использования памяти.
- tests/test2.py: Тест с массивом из одного элемента для проверки корректности обработки минимального размера данных.
- tests/test3.py: Тест с большим случайным массивом для проверки эффективности алгоритма на больших данных.

## Как запустить проект

### Установка зависимостей

Проект не требует дополнительных зависимостей, кроме стандартной библиотеки Python. Однако для оценки использования памяти используется модуль psutil, который необходимо установить:
```
pip install psutil
```
### Запуск алгоритма сортировки

1. Перейдите в директорию Task2/src:
2. Убедитесь, что файл input.txt содержит корректные входные данные в следующем формате:
```
n
a1 a2 a3 ... an
```  

- Первая строка: число n (1 ≤ n ≤ 10⁵) — количество элементов массива.
- Вторая строка: n целых чисел, разделённых пробелами.

3. Запустите скрипт сортировки.
4. Результат работы будет записан в файл output.txt в отсортированном порядке. Дополнительно в консоль будут выведены индексы и элементы подмассивов на этапе слияния.

### Запуск тестов

1. Перейдите в директорию с тестами.
2. Откройте необходимыйт файл. 
3. Запустите скрипт теста.

## Формат входных и выходных данных

### Входной файл (input.txt)
```
n
a1 a2 a3 ... an
```
- Первая строка: число n (1 ≤ n ≤ 10⁵) — количество элементов массива.
- Вторая строка: n целых чисел, по модулю не превосходящих 10⁹, разделённых пробелами.

### Выходной файл (output.txt)
```
b1 b2 b3 ... bn
```
- Отсортированный массив чисел в неубывающем порядке.

Если входные данные не соответствуют условиям, выводится сообщение:
```
Введенные данные не соответствуют условию
```
## Описание алгоритма

### Сортировка слиянием с выводом индексов

Алгоритм сортировки слиянием работает по принципу "разделяй и властвуй". В данной модификации на этапе слияния выводятся индексы и элементы подмассивов, что позволяет отслеживать процесс объединения.

#### Основные шаги алгоритма:

1. Разделение: Рекурсивно делим массив на две половины до тех пор, пока не останутся массивы из одного элемента.
2. Слияние: Объединяем отсортированные половины в единый отсортированный массив, выводя индексы и элементы подмассивов.

#### Функции
- merge_indexes(array, left, middle, right): Объединяет две отсортированные половины массива array от индексов left до middle и от middle+1 до right в один отсортированный массив. Во время слияния выводит индексы и элементы объединяемых подмассивов.
- merge_sort_indexes(array, left, right): Рекурсивно сортирует массив array от индекса left до right с использованием алгоритма сортировки слиянием с выводом индексов.

### Основные характеристики

- Время работы: O(n log n) в худшем, среднем и лучшем случае.
- Память: Дополнительная память O(n) для временных массивов при слиянии.

## Тестирование

Для проверки корректности и эффективности алгоритма реализованы три теста:

1. test1.py: Тест с небольшим массивом для оценки времени выполнения и использования памяти.
2. test2.py: Тест с массивом из одного элемента для проверки корректности обработки минимального размера данных.
3. test3.py: Тест с большим случайным массивом (до 10⁵ элементов) для проверки производительности на больших данных.

### Запуск тестов

Каждый тестовый скрипт выполняет сортировку и выводит время выполнения и использование памяти.

## Примеры

### Пример 1: Успешная сортировка с выводом индексов

Входной файл (`input.txt`):
```
10
1 8 2 1 4 7 3 2 3 6
```

Выходной файл (`output.txt`):
```
1 1 2 2 3 3 4 6 7 8
```
Вывод в консоль:

```
Индексы: 1, 10. Элементы: 1, 6
Индексы: 1, 5. Элементы: 1, 4
Индексы: 6, 10. Элементы: 7, 6
...
```
### Пример 2: Некорректные данные

Входной файл (`input.txt`):

```
100000
1 2 3
```
Выходной файл (`output.txt`):

```
Введенные данные не соответствуют условию
```
## Оценка производительности

В основных скриптах файлов `test1`, `test2`, `test3` реализовано измерение времени выполнения и использования памяти для различных типов массивов:

- Маленький массив: Проверка быстродействия и памяти на небольшом наборе данных.
- Массив из одного элемента: Проверка корректности обработки минимального размера данных.
- Большой случайный массив: Оценка производительности на больших объемах данных.

Пример вывода для малого массива:
```
Время: 0.0023 секунд
Память: 20.5 Мбайт
```
## Заключение

Задача 2 демонстрирует расширенную реализацию алгоритма сортировки слиянием с дополнительным выводом индексов и элементов подмассивов на этапе слияния. Это позволяет лучше понять внутреннюю работу алгоритма и его поведение при различных типах входных данных. Тестирование подтверждает корректность и эффективность модифицированного алгоритма, его способность обрабатывать как небольшие, так и большие массивы данных.
