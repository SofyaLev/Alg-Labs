# Задача 3: Подсчет инверсий в массиве

## Описание

В данной задаче реализован алгоритм подсчета количества инверсий в массиве с использованием модифицированной сортировки слиянием. Инверсия — это пара элементов массива (i, j), такая что i < j и array[i] > array[j]. Основная цель задачи — определить общее количество инверсий в заданном массиве, что является важным показателем для оценки "неупорядоченности" массива и может применяться в различных областях, включая анализ алгоритмов и статистику.

## Структура проекта
```
Task3/
├── src/
│   ├── input.txt
│   ├── inversions_count.py
│   ├── output.txt
│   └── task3.py
└── tests/
    ├── test1.py
    ├── test2.py
    └── test3.py
```
### Описание файлов

- src/inversions_count.py: Модуль с реализацией алгоритма подсчета инверсий с использованием модифицированной сортировки слиянием. Содержит функции inversions_merge и inversions_merge_sort.
- src/task3.py: Основной скрипт для выполнения задачи. Читает данные из input.txt, выполняет подсчет инверсий и записывает результат в output.txt. Также включает код для тестирования производительности и использования памяти на различных типах массивов.
- src/input.txt: Входной файл, содержащий количество элементов и сам массив чисел.
- src/output.txt: Выходной файл, содержащий общее количество инверсий в массиве.
- tests/test1.py: Тест с небольшим массивом для оценки производительности и использования памяти.
- tests/test2.py: Тест с массивом из одного элемента для проверки корректности обработки минимального размера данных.
- tests/test3.py: Тест с большим случайным массивом для проверки эффективности алгоритма на больших данных.

## Как запустить проект

### Установка зависимостей

Проект использует стандартную библиотеку Python. Для оценки использования памяти необходимо установить модуль psutil:
```
pip install psutil
```

### Запуск алгоритма подсчета инверсий

1. Перейдите в директорию Task3/src.
2. Убедитесь, что файл input.txt содержит корректные входные данные в следующем формате:
```
n
a1 a2 a3 ... an
```

- Первая строка: число n (1 ≤ n ≤ 10⁵) — количество элементов массива.
- Вторая строка: n целых чисел, разделённых пробелами.

3. Запустите скрипт подсчета инверсий.
4. Результат работы будет записан в файл output.txt в виде одного числа — общего количества инверсий в массиве.

### Запуск тестов

1. Перейдите в директорию с тестами.
2. Откройте необходимыйт файл. 
3. Запустите скрипт теста.

## Формат входных и выходных данных

### Входной файл (input.txt)
```
n
a1 a2 a3 ... an
```
- Первая строка: число n (1 ≤ n ≤ 10⁵) — количество элементов массива.
- Вторая строка: n целых чисел, по модулю не превосходящих 10⁹, разделённых пробелами.

### Выходной файл (output.txt)

```
k
```
- `k`: Общее количество инверсий в массиве.

Если входные данные не соответствуют условиям, выводится сообщение:

```
Введенные данные не соответствуют условию
```

## Описание алгоритма

### Подсчет инверсий с использованием сортировки слиянием

Алгоритм подсчета инверсий основан на модифицированной сортировке слиянием и работает по принципу "разделяй и властвуй". Основные шаги алгоритма:

1. Разделение: Рекурсивно делим массив на две половины до тех пор, пока не останутся массивы из одного элемента.
2. Подсчет инверсий: При слиянии двух отсортированных половин подсчитываем количество инверсий, возникающих между элементами двух половин.
3. Слияние: Объединяем две отсортированные половины в единый отсортированный массив.

#### Функции

- inversions_merge(array, temp_array, left, middle, right): Объединяет две отсортированные половины массива array от индексов left до middle и от middle+1 до right в один отсортированный массив. Во время слияния подсчитывает количество инверсий, возникающих между элементами двух половин.
- inversions_merge_sort(array, temp_array, left, right): Рекурсивно сортирует массив array от индекса left до right с использованием алгоритма сортировки слиянием и подсчитывает общее количество инверсий.

### Основные характеристики

- Время работы: O(n log n) — эффективное решение для больших массивов.
- Память: Дополнительная память O(n) для временного массива при слиянии.

## Тестирование

Для проверки корректности и эффективности алгоритма реализованы три теста:

1. test1.py: Тест с небольшим массивом для оценки времени выполнения и использования памяти.
2. test2.py: Тест с массивом из одного элемента для проверки корректности обработки минимального размера данных.
3. test3.py: Тест с большим случайным массивом (до 10⁵ элементов) для проверки производительности на больших данных.

### Запуск тестов

Каждый тестовый скрипт выполняет подсчет инверсий и выводит время выполнения и использование памяти.

## Примеры

### Пример 1: Успешный подсчет инверсий

Входной файл (`input.txt`):

```
10
1 8 2 1 4 7 3 2 3 6
```

Выходной файл (`output.txt`):

```
17
```
Объяснение:

В данном массиве 17 инверсий:

- (8,2), (8,1), (8,4), (8,7), (8,3), (8,2), (8,3), (8,6)
- (2,1)
- (4,3), (4,2), (4,3)
- (7,3), (7,2), (7,3), (7,6)
- (3,2)

### Пример 2: Некорректные данные

Входной файл (`input.txt`):
```
100000
1 2 3
```
Выходной файл (`output.txt`):

```
Введенные данные не соответствуют условию
```
## Оценка производительности

В основных скриптах файлов `test1`, `test2`, `test3` реализовано измерение времени выполнения и использования памяти для различных типов массивов:

- Маленький массив: Проверка быстродействия и памяти на небольшом наборе данных.
- Массив из одного элемента: Проверка корректности обработки минимального размера данных.
- Большой случайный массив: Оценка производительности на больших объемах данных.

### Пример вывода для малого массива:

```
Время: 0.0012 секунд
Память: 15.3 Мбайт
```
### Пример вывода для большого массива:

```
Время: 0.85 секунд
Память: 50.7 Мбайт
```
## Заключение

Задача 3 демонстрирует эффективную реализацию алгоритма подсчета инверсий в массиве с использованием модифицированной сортировки слиянием. Алгоритм обеспечивает линейно-логарифмическую сложность по времени и подходит для обработки больших массивов данных. Тестирование подтверждает корректность и производительность алгоритма на различных типах входных данных, включая крайние случаи.
